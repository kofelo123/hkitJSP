<%@ page language="java" contentType="text/html; charset=UTF-8" errorPage="error.jsp" import="java.sql.*,java.io.*,java.net.*,java.util.*,java.text.*"
    pageEncoding="UTF-8"%>
<% request.setCharacterEncoding("utf-8"); %>

<%
	Connection conn = null;
	Statement stmt= null;
	ResultSet rs = null;
	PreparedStatement pstmt = null;
	String mode = request.getParameter("mode");
	String userid = request.getParameter("userid");
	String username = request.getParameter("password");
	String securitynum1 = request.getParameter("securitynum1");
	String securitynum2 = request.getParameter("securitynum2");
	String email = request.getParameter("email"); 
	String zipcode1 = request.getParameter("zipcode1"); 
	String zipcode2 = request.getParameter("zipcode2"); 
	String address1  = request.getParameter("address1"); 
	String address2 = request.getParameter("addresss2"); 
	String phone1 = request.getParameter("phone1"); 
	String phone2 = request.getParameter("phone2"); 
	String phone3 = request.getParameter("phone3"); 
	String securitynum = new String(); 
	String query = new String();
	String selected = new String();
	StringTokenizer st_securitynum = null;
	StringTokenizer st_zipcode = null;
	StringTokenizer st_phone = null;
	
	java.util.Date yymmdd = new java.util.Date();
	SimpleDateFormat myformat = new SimpleDateFormat("yy-MM-d h:mm a");
	String regdate = myformat.format(yymmdd);
	
	try{
		Class.forName("com.mysql.jdbc.Driver");
	}catch(ClassNotFoundException e){
		out.println(e);
	}
	
	try{
		conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/member","hkitJeongwon","gj0123");
		stmt = conn.createStatement();
		if(mode.equals("null") || mode.equals("modify")){
			query = "select * from member where userid='"+userid+"'";
			rs = stmt.executeQuery(query);
			
			if(rs.next()){
				username = rs.getString("username");
				password = rs.getString("password");
				
				st_securitynum = new StringTokenizer(rs.getString("securitynum"),"-");
				email = rs.getString("email");
				st_zipcode = new StringTokenizer(rs.getString("zipcode"), "-");
				address1 = rs.getString("address1");
				address2 = rs.getString("address2");
				st_phone = new StringTokenizer(rs.getString("phone"),"-");
				
			if(st_securitynum.hasMoreTokens()){
				securitynum1 = st_securitynum.nextToken();
			}
			
			if(st_securitynum.hasMoreTokens()){
				securitynum2 = st_securitynum.nextToken();
			}
			
			if(st_zipcode.hasMoreTokens()){
				zipcode1 = st_zipcode.nextToken();
			}
			if(st_zipcode.hasMoreTokens()){
				zipcode2 = st_zipcode.nextToken();
			}
			
			
				
			}
		}
	}
%>
<!DOCTYPE html>
<html>
<head>
<title>Insert title here</title>
</head>
<body>

</body>
</html>